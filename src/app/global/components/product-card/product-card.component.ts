import { CommonModule } from '@angular/common';
import { Component, input, signal } from '@angular/core';
import { RouterLink } from '@angular/router';
import { ExtraProductDetails } from '@global/interfaces/extraProductDetails.interface';
import { ProductCard } from '@global/interfaces/product-card.interface';
import { LongDescriptionPipe } from 'src/app/core/pipes/long-description.pipe';
import { ShortDescriptionPipe } from 'src/app/core/pipes/short-description.pipe';
import { SafePipe } from 'safe-pipe';

@Component({
  selector: 'app-product-card',
  standalone: true,
  imports: [
    RouterLink,
    CommonModule,
    SafePipe,
    ShortDescriptionPipe,
    LongDescriptionPipe,
  ],
  templateUrl: './product-card.component.html',
  styles: ``,
})
export class ProductCardComponent {
  itemAdded = signal<boolean>(false);
  exProdDetails = input.required<ExtraProductDetails[]>();
  heartItem = `<svg
                  width="56"
                  height="56"
                  viewBox="0 0 48 48"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g filter="url(#filter0_d_208_2289)">
                    <rect x="8" width="32" height="32" rx="16" fill="white" />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M24.577 11.7642C24.2546 12.0736 23.7454 12.0736 23.423 11.7642L22.846 11.2105C22.1707 10.5624 21.2583 10.1667 20.25 10.1667C18.1789 10.1667 16.5 11.8456 16.5 13.9167C16.5 15.9022 17.5748 17.5417 19.1265 18.8888C20.6794 20.237 22.5362 21.1312 23.6455 21.5876C23.8775 21.683 24.1225 21.683 24.3545 21.5876C25.4638 21.1312 27.3206 20.237 28.8735 18.8888C30.4252 17.5417 31.5 15.9022 31.5 13.9167C31.5 11.8456 29.8211 10.1667 27.75 10.1667C26.7417 10.1667 25.8294 10.5624 25.154 11.2105L24.577 11.7642ZM24 10.008C23.0268 9.074 21.7054 8.5 20.25 8.5C17.2585 8.5 14.8333 10.9251 14.8333 13.9167C14.8333 19.2235 20.642 22.1542 23.0115 23.1289C23.6496 23.3914 24.3504 23.3914 24.9885 23.1289C27.3581 22.1542 33.1667 19.2235 33.1667 13.9167C33.1667 10.9251 30.7416 8.5 27.75 8.5C26.2946 8.5 24.9733 9.074 24 10.008Z"
                    />
                  </g>
                  <defs>
                    <filter
                      id="filter0_d_208_2289"
                      x="0"
                      y="0"
                      width="48"
                      height="48"
                      filterUnits="userSpaceOnUse"
                      color-interpolation-filters="sRGB"
                    >
                      <feFlood flood-opacity="0" result="BackgroundImageFix" />
                      <feColorMatrix
                        in="SourceAlpha"
                        type="matrix"
                        values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                        result="hardAlpha"
                      />
                      <feMorphology
                        radius="8"
                        operator="erode"
                        in="SourceAlpha"
                        result="effect1_dropShadow_208_2289"
                      />
                      <feOffset dy="8" />
                      <feGaussianBlur stdDeviation="8" />
                      <feColorMatrix
                        type="matrix"
                        values="0 0 0 0 0.0583333 0 0 0 0 0.0583333 0 0 0 0 0.0583333 0 0 0 0.12 0"
                      />
                      <feBlend
                        mode="multiply"
                        in2="BackgroundImageFix"
                        result="effect1_dropShadow_208_2289"
                      />
                      <feBlend
                        mode="normal"
                        in="SourceGraphic"
                        in2="effect1_dropShadow_208_2289"
                        result="shape"
                      />
                    </filter>
                  </defs>
              </svg>`;
  ratingIcon = `<svg width="88" height="16" viewBox="0 0 88 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M79.5383 1.10997C79.7091 0.699319 80.2909 0.699318 80.4617 1.10996L81.9987 4.80556C82.0707 4.97868 82.2336 5.09696 82.4204 5.11194L86.4102 5.4318C86.8535 5.46734 87.0332 6.02059 86.6955 6.30993L83.6557 8.91378C83.5133 9.03576 83.4512 9.22715 83.4947 9.40952L84.4234 13.3028C84.5265 13.7354 84.0559 14.0773 83.6764 13.8455L80.2606 11.7592C80.1006 11.6615 79.8994 11.6615 79.7394 11.7592L76.3236 13.8455C75.9441 14.0773 75.4735 13.7354 75.5766 13.3028L76.5053 9.40952C76.5488 9.22715 76.4867 9.03576 76.3443 8.91378L73.3045 6.30993C72.9668 6.02059 73.1465 5.46734 73.5898 5.4318L77.5796 5.11194C77.7664 5.09696 77.9293 4.97868 78.0013 4.80556L79.5383 1.10997Z" fill="#343839"/>
                  <path d="M61.5383 1.10997C61.7091 0.699319 62.2909 0.699318 62.4617 1.10996L63.9987 4.80556C64.0707 4.97868 64.2336 5.09696 64.4204 5.11194L68.4102 5.4318C68.8535 5.46734 69.0332 6.02059 68.6955 6.30993L65.6557 8.91378C65.5133 9.03576 65.4512 9.22715 65.4947 9.40952L66.4234 13.3028C66.5265 13.7354 66.0559 14.0773 65.6764 13.8455L62.2606 11.7592C62.1006 11.6615 61.8994 11.6615 61.7394 11.7592L58.3236 13.8455C57.9441 14.0773 57.4735 13.7354 57.5766 13.3028L58.5053 9.40952C58.5488 9.22715 58.4867 9.03576 58.3443 8.91378L55.3045 6.30993C54.9668 6.02059 55.1465 5.46734 55.5898 5.4318L59.5796 5.11194C59.7664 5.09696 59.9293 4.97868 60.0013 4.80556L61.5383 1.10997Z" fill="#343839"/>
                  <path d="M43.5383 1.10997C43.7091 0.699319 44.2909 0.699318 44.4617 1.10996L45.9987 4.80556C46.0707 4.97868 46.2336 5.09696 46.4204 5.11194L50.4102 5.4318C50.8535 5.46734 51.0332 6.02059 50.6955 6.30993L47.6557 8.91378C47.5133 9.03576 47.4512 9.22715 47.4947 9.40952L48.4234 13.3028C48.5265 13.7354 48.0559 14.0773 47.6764 13.8455L44.2606 11.7592C44.1006 11.6615 43.8994 11.6615 43.7394 11.7592L40.3236 13.8455C39.9441 14.0773 39.4735 13.7354 39.5766 13.3028L40.5053 9.40952C40.5488 9.22715 40.4867 9.03576 40.3443 8.91378L37.3045 6.30993C36.9668 6.02059 37.1465 5.46734 37.5898 5.4318L41.5796 5.11194C41.7664 5.09696 41.9293 4.97868 42.0013 4.80556L43.5383 1.10997Z" fill="#343839"/>
                  <path d="M25.5383 1.10997C25.7091 0.699319 26.2909 0.699318 26.4617 1.10996L27.9987 4.80556C28.0707 4.97868 28.2336 5.09696 28.4204 5.11194L32.4102 5.4318C32.8535 5.46734 33.0332 6.02059 32.6955 6.30993L29.6557 8.91378C29.5133 9.03576 29.4512 9.22715 29.4947 9.40952L30.4234 13.3028C30.5265 13.7354 30.0559 14.0773 29.6764 13.8455L26.2606 11.7592C26.1006 11.6615 25.8994 11.6615 25.7394 11.7592L22.3236 13.8455C21.9441 14.0773 21.4735 13.7354 21.5766 13.3028L22.5053 9.40952C22.5488 9.22715 22.4867 9.03576 22.3443 8.91378L19.3045 6.30993C18.9668 6.02059 19.1465 5.46734 19.5898 5.4318L23.5796 5.11194C23.7664 5.09696 23.9293 4.97868 24.0013 4.80556L25.5383 1.10997Z" fill="#343839"/>
                  <path d="M7.53834 1.10997C7.70914 0.699319 8.29086 0.699318 8.46166 1.10996L9.99874 4.80556C10.0707 4.97868 10.2336 5.09696 10.4204 5.11194L14.4102 5.4318C14.8535 5.46734 15.0332 6.02059 14.6955 6.30993L11.6557 8.91378C11.5133 9.03576 11.4512 9.22715 11.4947 9.40952L12.4234 13.3028C12.5265 13.7354 12.0559 14.0773 11.6764 13.8455L8.26063 11.7592C8.10062 11.6615 7.89938 11.6615 7.73937 11.7592L4.32363 13.8455C3.94408 14.0773 3.47345 13.7354 3.57665 13.3028L4.50534 9.40952C4.54884 9.22715 4.48665 9.03576 4.34426 8.91378L1.30453 6.30993C0.966758 6.02059 1.14652 5.46734 1.58985 5.4318L5.57955 5.11194C5.76645 5.09696 5.92925 4.97868 6.00126 4.80556L7.53834 1.10997Z" fill="#343839"/>
                </svg>
                `;
  // product card item
  card = input<ProductCard>();

  addedToWishList() {
    this.itemAdded.set(!this.itemAdded());
    console.log(`Item adedd State: `, this.itemAdded());
  }
}
